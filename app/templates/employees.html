{% extends "base.html" %}
{% block title %}{{ title }}{% endblock %}
{% block content %}
<h1 class="mb-4">Employee Scoreboard</h1>

<div class="card mb-4">
  <div class="card-body">
    <form method="get" action="/employees" class="row g-3 align-items-end">
      <div class="col-12 col-md-4">
        <label for="active_only" class="form-label">Show</label>
        <select class="form-select" id="active_only" name="active_only">
          <option value="1" {% if active_only == "1" %}selected{% endif %}>Active only</option>
          <option value="0" {% if active_only == "0" %}selected{% endif %}>All employees</option>
        </select>
      </div>
      <div class="col-12 col-md-2">
        <button type="submit" class="btn btn-primary w-100">Apply</button>
      </div>
    </form>
  </div>
</div>

<div class="card">
  <div class="card-body">
    <div class="table-wrap">
      <table class="table table-striped">
        <thead>
          <tr><th>Employee</th><th>Mentions</th><th>Avg Rating</th><th>1-2 Stars</th><th>3-5 Stars</th></tr>
        </thead>
        <tbody>
          {% for row in rows %}
          <tr>
            <td><a href="/employees/{{ row.id }}">{{ row.full_name }}</a></td>
            <td>{{ row.mentions }}</td>
            <td>{{ row.avg_rating }}</td>
            <td>{{ row.low_count }}</td>
            <td>{{ row.high_count }}</td>
          </tr>
          {% endfor %}
          {% if rows|length == 0 %}
          <tr><td colspan="5">No employees found.</td></tr>
          {% endif %}
        </tbody>
      </table>
    </div>
  </div>
</div>
{% endblock %}
